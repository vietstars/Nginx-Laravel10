var d={};Object.defineProperty(d,"__esModule",{value:!0});const S=1/60*1e3,T=typeof performance<"u"?()=>performance.now():()=>Date.now(),y=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>setTimeout(()=>e(T()),S);function N(e){let t=[],n=[],a=0,o=!1,f=!1;const m=new WeakSet,h={schedule:(s,r=!1,c=!1)=>{const g=c&&o,w=g?t:n;return r&&m.add(s),w.indexOf(s)===-1&&(w.push(s),g&&o&&(a=t.length)),s},cancel:s=>{const r=n.indexOf(s);r!==-1&&n.splice(r,1),m.delete(s)},process:s=>{if(o){f=!0;return}if(o=!0,[t,n]=[n,t],n.length=0,a=t.length,a)for(let r=0;r<a;r++){const c=t[r];c(s),m.has(c)&&(h.schedule(c),e())}o=!1,f&&(f=!1,h.process(s))}};return h}const O=40;let x=!0,l=!1,F=!1;const u={delta:0,timestamp:0},i=["read","update","preRender","render","postRender"],p=i.reduce((e,t)=>(e[t]=N(()=>l=!0),e),{}),v=i.reduce((e,t)=>{const n=p[t];return e[t]=(a,o=!1,f=!1)=>(l||P(),n.schedule(a,o,f)),e},{}),D=i.reduce((e,t)=>(e[t]=p[t].cancel,e),{}),E=i.reduce((e,t)=>(e[t]=()=>p[t].process(u),e),{}),M=e=>p[e].process(u),R=e=>{l=!1,u.delta=x?S:Math.max(Math.min(e-u.timestamp,O),1),u.timestamp=e,F=!0,i.forEach(M),F=!1,l&&(x=!1,y(R))},P=()=>{l=!0,x=!0,F||y(R)},_=()=>u;d.cancelSync=D;d.default=v;d.flushSync=E;d.getFrameData=_;export{d as f};
